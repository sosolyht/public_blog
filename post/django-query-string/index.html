<!DOCTYPE html>
<html lang="ko"><meta charset="utf-8"><meta name="generator" content="Hugo 0.92.1" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>Django Query String 쿼리스트링&nbsp;&ndash;&nbsp;코딩 잘 몰라요</title><link rel="stylesheet" href="/css/core.min.87f50917059ddb0ee36ae0486a596f23101765769bcadcc77a4ee5817cd05ae3108d15ed1567b0740b7c5097fd944651.css" integrity="sha384-h/UJFwWd2w7jauBIallvIxAXZXabytzHek7lgXzQWuMQjRXtFWewdAt8UJf9lEZR"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Django Query String 쿼리스트링" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><span class="site name">코딩 잘 몰라요</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/about/">About</a><a class="nav item" href="https://gohugo%2eio/"target="_blank" rel="noopener noreferrer">Hugo</a></nav></div></span></div></section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Django Query String 쿼리스트링</h1><p class="article date">2022-02-06</p></section><article class="article markdown-body"><h1 id="query-string">Query String</h1>
<p><img  src="https://user-images.githubusercontent.com/2377807/152666203-2279cc57-d5dc-4a03-b54d-568e228bd25f.png"
        alt="query string"/></p>
<p>기존에 저는 뷰를 작성하고 특정 URL로 접속해 body에 데이터를 담아 JSON 타입으로 인코딩을 해서 통신을 했습니다.
그러나 클라이언트의 기능이 점점 추가될수록 서버 측에서는 조건에 따라 모든 API를 작성하는 것이 반복적이고 불필요한 작업이 될 수 있습니다.</p>
<p>이러한 문제점을 해결해주는게 RESTful한 API 작성을 도와주는 <code>Query String</code> 입니다.</p>
<p><a href="https://cidk.xyz/p/restful-api/"target="_blank" rel="noopener noreferrer">RESTfulAPI 란??</a>
</p>
<p><code>Query String</code> 은 <code>?</code>로 시작해서 <code>&amp;</code>를 통해 여러 데이터를 동시에 전달 가능합니다.</p>
<blockquote>
<p>views.py</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">ProductDetailView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">product_id</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">product</span> <span class="o">=</span> <span class="n">Product</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span> <span class="o">=</span> <span class="n">product_id</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span>             <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s1">&#39;name&#39;</span>           <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s1">&#39;shipping&#39;</span>       <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">shipping</span><span class="p">,</span>
                <span class="s1">&#39;price&#39;</span>          <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span><span class="p">,</span>
                <span class="s1">&#39;is_green&#39;</span>       <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">is_green</span><span class="p">,</span>
                <span class="s1">&#39;is_sale&#39;</span>        <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">is_sale</span><span class="p">,</span>
                <span class="s1">&#39;category_id&#39;</span>    <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">category_id</span><span class="p">,</span>
                <span class="s1">&#39;stock&#39;</span>          <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">stock</span><span class="p">,</span>
                <span class="s1">&#39;discount_price&#39;</span> <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">discount_price</span><span class="p">,</span>
                <span class="s1">&#39;image&#39;</span>          <span class="p">:</span> <span class="n">product</span><span class="o">.</span><span class="n">image_set</span><span class="o">.</span><span class="n">all</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">img_url</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">({</span><span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">},</span> <span class="n">status</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
</code></pre></div><blockquote>
<p>urls.py</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s2">&#34;/&lt;int:product_id&gt;&#34;</span><span class="p">,</span><span class="n">ProductDetailView</span><span class="o">.</span><span class="n">as_view</span><span class="p">())</span>
<span class="p">]</span>
</code></pre></div><p>위의 코드는 기존의 상품을 가져오는 뷰</p>
<p><code>http://127.0.0.1/products/7</code></p>
<p>라고 입력을 하면 <code>product_id</code> 의 7번 상품을 조회해서 정보를 JSON 타입으로 주었습니다.</p>
<p>이번에는 쿼리스트링을 적용해 볼까요?</p>
<blockquote>
<p>views.py</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">ProductDetailView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">product_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
            <span class="n">products</span> <span class="o">=</span> <span class="n">Product</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span> <span class="o">=</span> <span class="n">product_id</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="n">products</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">products</span><span class="p">)</span>


            <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">({</span><span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">products</span><span class="p">},</span> <span class="n">status</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
</code></pre></div><blockquote>
<p>urls.py</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="n">ProductDetailView</span><span class="o">.</span><span class="n">as_view</span><span class="p">())</span>
<span class="p">]</span>
</code></pre></div><p><code>request.GET.get</code> 으로 <code>id</code> 7번 아이템을 가져와서 모든 정보를 가져오라는 뜻입니다.</p>
<p>그래서 입력을 <code>http://127.0.0.1:8000/products?id=7</code> 이렇게 했더니</p>
<p><img  src="https://user-images.githubusercontent.com/2377807/152666763-2c6ed01b-1f6b-4f6e-a683-ae34edd266ab.png"
        alt="image"/></p>
<p>똑같이 정상적으로 출력이 되는 것을 확인하실 수 있습니다.</p>
<p>아직까지도 난해한 부분이라 계속 응용을 해봐야할것같습니다.</p>
</article><section class="article labels"><a class="category" href=/categories/django/>Django</a><a class="tag" href=/tags/django/>Django</a></section>
</div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/post/django-why-need-request/"><span class="iconfont icon-article"></span>Django JsonResponse를 쓰는데 왜 request 가 필요할까</a></p></section></div></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">©2022 cidk.</p>
    <p class="powerby"><span>Powered&nbsp;by&nbsp;</span><a href="https://gohugo.io"
        target="_blank" rel="noopener noreferrer">Hugo</a></p></div>
</section>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-216039735-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</body>

</html>