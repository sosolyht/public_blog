<!doctype html><html lang=ko dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[데이터베이스] 트랜잭션 격리 수준(Transaction isolation Level) | 희택의 노력</title><meta name=keywords content="트랜잭션,transaction,격리 수준,Isolation Level"><meta name=description content="격리 수준(Isolation Level) 격리 수준이란 트랜잭션들끼리 일관된 데이터들을 얼마나 허용할것인지를 정하는 수준이다. 쉽게 말해 동시에 데이터베이스에 접근"><meta name=author content="최희택"><link rel=canonical href=https://heetaek.com/post/dbisolation/><link crossorigin=anonymous href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://heetaek.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://heetaek.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://heetaek.com/favicon-32x32.png><link rel=apple-touch-icon href=https://heetaek.com/apple-touch-icon.png><link rel=mask-icon href=https://heetaek.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-QPR5XGZ8DK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QPR5XGZ8DK",{anonymize_ip:!1})}</script><meta property="og:title" content="[데이터베이스] 트랜잭션 격리 수준(Transaction isolation Level)"><meta property="og:description" content="격리 수준(Isolation Level) 격리 수준이란 트랜잭션들끼리 일관된 데이터들을 얼마나 허용할것인지를 정하는 수준이다. 쉽게 말해 동시에 데이터베이스에 접근"><meta property="og:type" content="article"><meta property="og:url" content="https://heetaek.com/post/dbisolation/"><meta property="og:image" content="https://heetaek.com/profile.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-06-26T00:00:00+00:00"><meta property="article:modified_time" content="2022-06-26T00:00:00+00:00"><meta property="og:site_name" content="희택의 노력"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://heetaek.com/profile.png"><meta name=twitter:title content="[데이터베이스] 트랜잭션 격리 수준(Transaction isolation Level)"><meta name=twitter:description content="격리 수준(Isolation Level) 격리 수준이란 트랜잭션들끼리 일관된 데이터들을 얼마나 허용할것인지를 정하는 수준이다. 쉽게 말해 동시에 데이터베이스에 접근"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://heetaek.com/post/"},{"@type":"ListItem","position":3,"name":"[데이터베이스] 트랜잭션 격리 수준(Transaction isolation Level)","item":"https://heetaek.com/post/dbisolation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[데이터베이스] 트랜잭션 격리 수준(Transaction isolation Level)","name":"[데이터베이스] 트랜잭션 격리 수준(Transaction isolation Level)","description":"격리 수준(Isolation Level) 격리 수준이란 트랜잭션들끼리 일관된 데이터들을 얼마나 허용할것인지를 정하는 수준이다. 쉽게 말해 동시에 데이터베이스에 접근","keywords":["트랜잭션","transaction","격리 수준","Isolation Level"],"articleBody":"격리 수준(Isolation Level) 격리 수준이란 트랜잭션들끼리 일관된 데이터들을 얼마나 허용할것인지를 정하는 수준이다.\n쉽게 말해 동시에 데이터베이스에 접근할 때 그 접근을 어떻게 제어할지에 대한 설정이다.\n격리 수준에는 총 4가지의 수준이 있다.\nRead-Uncommitted (레벨 0) Read-Commited (레벨 1) Repeat-Read (레벨 2) Serializable (레벨 3) 밑으로 갈 수록 격리 수준은 높아지지만 성능은 떨어진다.\n데이터 정확성과 성능이 반비례하므로 상황에 따라 잘 선택하는것이 중요하다.\nIsolation Level 종류 Read-Uncommitted (레벨 0) SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸리지 않는 계층 트랜잭션이 처리중이거나 아직 commit 되지않은 데이터를 다른 트랜잭션이 읽는 것을 허용한다. 데이터베이스의 일관성을 유지하는 것이 불가능하다. Dirty Read 발생 A 트랜잭션에서 10번 유저의 나이를 28에서 29으로 바꾸고, 아직 커밋하지않았다. B 트랜잭션에서 10번 유저의 나이를 조회 : 결과 = 28 -\u003e 더티 리드(Drity Read) 이후 A 트랜잭션에서 문제가 발생해 Rollback B 트랜잭션은 10번 유저가 여전히 29살이라 생각하고 로직을 수행 이런식으로 데이터 정합성에 문제가 생긴다. Read-Committed (레벨 1) SELECT 문장이 수행되는 동안 해당 데이터에 Shard Lock이 걸리는 계층 트랜잭션이 수행되는 동안 다른 트랜잭션이 접근할 수 없어 대기하게 된다. commit 이루어진 트랜잭션만 조회가 가능하다. Non-Repeatable Read 발생 B 트랜잭션에서 10번 유저의 나이를 조회: 결과 28 A 트랜잭션에서 10번 유저의 나이를 28에서 29로 바꾸고 commit B 트랜잭션에서 10번 유저의 나이를 조회 : 결과 29 Repeat-Read (레벨 2) 트랜잭션이 완료될 때까지 SELECT 문장이 사용되는 모든 데이터에 Shared Lock이 걸리는 계층 트랜잭션이 범위 내에서 조회한 데이터 내용이 항상 동일함을 보장한다. 다른 사용자는 트랜잭션 영역에 해당되는 데이터를 수정이 불가능하다. Phantom Read 발생 Serializable (레벨 3) 트랜잭션이 완료될 때까지 SELECT 문장이 사용되는 모든 데이터에 Shard Lock이 걸리는 계층 가장 엄격한 격리 수준으로 완벽한 읽기 모드를 제공한다. 다른 사용자는 트랜잭션에 영역에 해당되는 데이터를 수정 및 입력이 불가능하다. 일반적인 온라인 서비스에서는 Read Commited 나 Repeat-Read 중 하나를 사용한다\n오라클을 포함한 대부분의 DBMS 는 Read-Commited 이 기본 레벨이고,\nMySQL 은 기본 레벨은 Repeat-Read 이다.\n레벨 별 허용되는 이상 현상 Isolation Level Dirty Read Non-Repeatable Read Phantom Read Read Uncommitted(Level 0) 허용 허용 허용 Read Committed(Level 1) X 허용 허용 Repeat-Read(Level 2) X X 허용 Serializable(Level 3) X X X 그럼 Dirty Read , Non-Repeatable Read, Phantom Read 가 뭔지 알아보자.\nDirty Read\n어떤 트랜잭션에서 아직 실행이 끝나지 않은 다른 트랜잭션에 의한 변경사항을 보게되는 경우. 커밋되지 않은 수정중인 데이터를 다른 트랜잭션에서 읽을 수 있도록 허용할 때 발생하는 현상 Non-Repeatable Read\n한 트랜잭션에서 같은 쿼리를 두 번 수행할 떄 그 사이에 다른 트랜잭션 값을 수정 또는 삭제하면서 두 쿼리의 결과가 다르게 나타나는 일관성이 깨진 현상 한 트랜잭션에서 똑같은 SELECT 를 수행했을 때 항상 같은 결과를 반환해야한다는 Repeatable Read 정합성에 어긋난다. Phantom Read\n한 트랜잭션 안에서 일정 범위의 레코드를 두 번 읽었을 때, 첫 번째 쿼리에서 없던 레코드가 두 번째 쿼리에서 나타나는 현상 트랜잭션 도중 새로운 레코드 삽입을 허용하기 때문에 나타난다. 이렇게 격리 수준 레벨에 대한 이론적인것을 살펴보았지만,\n실제 실무에서는 어떻게 다뤄질지 전혀 감이 잡히지 않는다.\n아직은 어려운 주제인것같다.\nReference\nhttps://www.youtube.com/watch?v=e9PC0sroCzc https://devjem.tistory.com/27 https://wonit.tistory.com/463?category=790502 ","wordCount":"1237","inLanguage":"ko","datePublished":"2022-06-26T00:00:00Z","dateModified":"2022-06-26T00:00:00Z","author":{"@type":"Person","name":"최희택"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://heetaek.com/post/dbisolation/"},"publisher":{"@type":"Organization","name":"희택의 노력","logo":{"@type":"ImageObject","url":"https://heetaek.com/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://heetaek.com accesskey=h title="heetaek.com (Alt + H)">heetaek.com</a>
<span class=logo-switches></span></div><ul id=menu><li><a href=https://heetaek.com/categories/ title=카테고리><span>카테고리</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://heetaek.com>Home</a>&nbsp;»&nbsp;<a href=https://heetaek.com/post/>Posts</a></div><h1 class=post-title>[데이터베이스] 트랜잭션 격리 수준(Transaction isolation Level)</h1><div class=post-meta><span title='2022-06-26 00:00:00 +0000 UTC'>2022-06-26</span>&nbsp;·&nbsp;3 분&nbsp;·&nbsp;최희택</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>목차</span></summary><div class=inner><ul><li><a href=#%ea%b2%a9%eb%a6%ac-%ec%88%98%ec%a4%80isolation-level aria-label="격리 수준(Isolation Level)">격리 수준(Isolation Level)</a><ul><li><a href=#isolation-level-%ec%a2%85%eb%a5%98 aria-label="Isolation Level 종류">Isolation Level 종류</a><ul><li><a href=#read-uncommitted-%eb%a0%88%eb%b2%a8-0 aria-label="Read-Uncommitted (레벨 0)">Read-Uncommitted (레벨 0)</a></li><li><a href=#read-committed-%eb%a0%88%eb%b2%a8-1 aria-label="Read-Committed (레벨 1)">Read-Committed (레벨 1)</a></li><li><a href=#repeat-read-%eb%a0%88%eb%b2%a8-2 aria-label="Repeat-Read (레벨 2)">Repeat-Read (레벨 2)</a></li><li><a href=#serializable-%eb%a0%88%eb%b2%a8-3 aria-label="Serializable (레벨 3)">Serializable (레벨 3)</a></li></ul></li><li><a href=#%eb%a0%88%eb%b2%a8-%eb%b3%84-%ed%97%88%ec%9a%a9%eb%90%98%eb%8a%94-%ec%9d%b4%ec%83%81-%ed%98%84%ec%83%81 aria-label="레벨 별 허용되는 이상 현상">레벨 별 허용되는 이상 현상</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=격리-수준isolation-level>격리 수준(Isolation Level)<a hidden class=anchor aria-hidden=true href=#격리-수준isolation-level>#</a></h1><p>격리 수준이란 트랜잭션들끼리 일관된 데이터들을 얼마나 허용할것인지를 정하는 수준이다.</p><p>쉽게 말해 동시에 데이터베이스에 접근할 때 그 접근을 어떻게 제어할지에 대한 설정이다.</p><p>격리 수준에는 총 4가지의 수준이 있다.</p><ul><li>Read-Uncommitted (레벨 0)</li><li>Read-Commited (레벨 1)</li><li>Repeat-Read (레벨 2)</li><li>Serializable (레벨 3)</li></ul><p>밑으로 갈 수록 격리 수준은 높아지지만 성능은 떨어진다.</p><p>데이터 정확성과 성능이 반비례하므로 상황에 따라 잘 선택하는것이 중요하다.</p><h2 id=isolation-level-종류>Isolation Level 종류<a hidden class=anchor aria-hidden=true href=#isolation-level-종류>#</a></h2><h3 id=read-uncommitted-레벨-0>Read-Uncommitted (레벨 0)<a hidden class=anchor aria-hidden=true href=#read-uncommitted-레벨-0>#</a></h3><ul><li>SELECT 문장이 수행되는 동안 해당 데이터에 <code>Shared Lock이 걸리지 않는 계층</code></li><li>트랜잭션이 처리중이거나 아직 commit 되지않은 데이터를 다른 트랜잭션이 읽는 것을 허용한다.</li><li>데이터베이스의 일관성을 유지하는 것이 불가능하다.</li><li><code>Dirty Read</code> 발생<ul><li>A 트랜잭션에서 10번 유저의 나이를 28에서 29으로 바꾸고, 아직 커밋하지않았다.</li><li>B 트랜잭션에서 10번 유저의 나이를 조회 : 결과 = 28 -> 더티 리드(Drity Read)<ul><li>이후 A 트랜잭션에서 문제가 발생해 Rollback</li><li>B 트랜잭션은 10번 유저가 여전히 29살이라 생각하고 로직을 수행</li><li>이런식으로 데이터 정합성에 문제가 생긴다.</li></ul></li></ul></li></ul><h3 id=read-committed-레벨-1>Read-Committed (레벨 1)<a hidden class=anchor aria-hidden=true href=#read-committed-레벨-1>#</a></h3><ul><li>SELECT 문장이 수행되는 동안 해당 데이터에 <code>Shard Lock이 걸리는 계층</code></li><li>트랜잭션이 수행되는 동안 다른 트랜잭션이 접근할 수 없어 대기하게 된다.</li><li>commit 이루어진 트랜잭션만 조회가 가능하다.</li><li><code>Non-Repeatable Read</code> 발생<ul><li>B 트랜잭션에서 10번 유저의 나이를 조회: 결과 28</li><li>A 트랜잭션에서 10번 유저의 나이를 28에서 29로 바꾸고 commit</li><li>B 트랜잭션에서 10번 유저의 나이를 조회 : 결과 29</li></ul></li></ul><h3 id=repeat-read-레벨-2>Repeat-Read (레벨 2)<a hidden class=anchor aria-hidden=true href=#repeat-read-레벨-2>#</a></h3><ul><li>트랜잭션이 완료될 때까지 <code>SELECT 문장이 사용되는 모든 데이터에 Shared Lock이 걸리는 계층</code></li><li>트랜잭션이 범위 내에서 조회한 데이터 내용이 항상 동일함을 보장한다.</li><li>다른 사용자는 트랜잭션 영역에 해당되는 데이터를 수정이 불가능하다.</li><li><code>Phantom Read</code> 발생</li></ul><h3 id=serializable-레벨-3>Serializable (레벨 3)<a hidden class=anchor aria-hidden=true href=#serializable-레벨-3>#</a></h3><ul><li>트랜잭션이 완료될 때까지 <code>SELECT 문장이 사용되는 모든 데이터에 Shard Lock이 걸리는 계층</code></li><li>가장 엄격한 격리 수준으로 완벽한 읽기 모드를 제공한다.</li><li>다른 사용자는 트랜잭션에 영역에 해당되는 데이터를 수정 및 입력이 불가능하다.</li></ul><hr><p>일반적인 온라인 서비스에서는 <code>Read Commited</code> 나 <code>Repeat-Read</code> 중 하나를 사용한다</p><p>오라클을 포함한 대부분의 DBMS 는 <code>Read-Commited</code> 이 기본 레벨이고,</p><p>MySQL 은 기본 레벨은 <code>Repeat-Read</code> 이다.</p><hr><h2 id=레벨-별-허용되는-이상-현상>레벨 별 허용되는 이상 현상<a hidden class=anchor aria-hidden=true href=#레벨-별-허용되는-이상-현상>#</a></h2><table><thead><tr><th>Isolation Level</th><th>Dirty Read</th><th>Non-Repeatable Read</th><th>Phantom Read</th></tr></thead><tbody><tr><td>Read Uncommitted(Level 0)</td><td>허용</td><td>허용</td><td>허용</td></tr><tr><td>Read Committed(Level 1)</td><td>X</td><td>허용</td><td>허용</td></tr><tr><td>Repeat-Read(Level 2)</td><td>X</td><td>X</td><td>허용</td></tr><tr><td>Serializable(Level 3)</td><td>X</td><td>X</td><td>X</td></tr></tbody></table><p>그럼 <code>Dirty Read</code> , <code>Non-Repeatable Read</code>, <code>Phantom Read</code> 가 뭔지 알아보자.</p><ul><li><p>Dirty Read</p><ul><li>어떤 트랜잭션에서 아직 실행이 끝나지 않은 다른 트랜잭션에 의한 변경사항을 보게되는 경우.</li><li>커밋되지 않은 수정중인 데이터를 다른 트랜잭션에서 <code>읽을 수</code> 있도록 허용할 때 발생하는 현상</li></ul></li><li><p>Non-Repeatable Read</p><ul><li>한 트랜잭션에서 같은 쿼리를 두 번 수행할 떄 그 사이에 다른 트랜잭션 값을 <code>수정 또는 삭제</code>하면서 두 쿼리의 결과가 다르게 나타나는 일관성이 깨진 현상</li><li>한 트랜잭션에서 똑같은 SELECT 를 수행했을 때 항상 같은 결과를 반환해야한다는 Repeatable Read 정합성에 어긋난다.</li></ul></li><li><p>Phantom Read</p><ul><li>한 트랜잭션 안에서 일정 범위의 레코드를 두 번 읽었을 때, 첫 번째 쿼리에서 없던 레코드가 두 번째 쿼리에서 나타나는 현상</li><li>트랜잭션 도중 새로운 레코드 <code>삽입</code>을 허용하기 때문에 나타난다.</li></ul></li></ul><hr><p>이렇게 격리 수준 레벨에 대한 이론적인것을 살펴보았지만,</p><p>실제 실무에서는 어떻게 다뤄질지 전혀 감이 잡히지 않는다.</p><p>아직은 어려운 주제인것같다.</p><blockquote><p>Reference</p></blockquote><ul><li><a href="https://www.youtube.com/watch?v=e9PC0sroCzc">https://www.youtube.com/watch?v=e9PC0sroCzc</a></li><li><a href=https://devjem.tistory.com/27>https://devjem.tistory.com/27</a></li><li><a href="https://wonit.tistory.com/463?category=790502">https://wonit.tistory.com/463?category=790502</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://heetaek.com/tags/%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98/>트랜잭션</a></li><li><a href=https://heetaek.com/tags/transaction/>transaction</a></li><li><a href=https://heetaek.com/tags/%EA%B2%A9%EB%A6%AC%EC%88%98%EC%A4%80/>격리수준</a></li><li><a href=https://heetaek.com/tags/isolation-level/>isolation level</a></li></ul><nav class=paginav><a class=prev href=https://heetaek.com/post/dbn+1/><span class=title>« 이전 페이지</span><br><span>[데이터베이스] N + 1 문제</span></a>
<a class=next href=https://heetaek.com/post/db%E1%84%90%E1%85%B3%E1%84%85%E1%85%A2%E1%86%AB%E1%84%8C%E1%85%A2%E1%86%A8%E1%84%89%E1%85%A7%E1%86%AB/><span class=title>다음 페이지 »</span><br><span>[데이터베이스] 트랜잭션(Transaction) 이란?</span></a></nav></footer><script src=https://utteranc.es/client.js repo=sosolyht/utterances issue-term=pathname theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2022 <a href=https://heetaek.com>heetaek.com</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="복사";function s(){t.innerText="복사완료!",setTimeout(()=>{t.innerText="복사"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>